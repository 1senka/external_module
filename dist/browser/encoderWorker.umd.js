!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.encoderWorker=t():e.encoderWorker=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var f=function(){function e(t,n,r,o){switch(u(this,e),this._size=n,this._module=t,this._size){case 1:this._heapArray=r?this._module.HEAP8:this._module.HEAPU8;break;case 2:this._heapArray=r?this._module.HEAP16:this._module.HEAPU16;break;case 4:this._heapArray=r?this._module.HEAP32:this._module.HEAPU32;break;default:this._heapArray=this._module.HEAPU8}o&&(this._size=4,this._heapArray=this._module.HEAPF32),this._pointer=this._module._malloc(n)}return c(e,[{key:"free",value:function(){this._module._free(this.pointer)}},{key:"pointer",get:function(){return this._pointer}},{key:"value",get:function(){var e=0;switch(this._size){case 2:e=1;break;case 4:e=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}return this._heapArray[this.pointer>>e]},set:function(e){var t=0;switch(this._size){case 2:t=1;break;case 4:t=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}this._heapArray[this.pointer>>t]=e}}]),e}(),l=function(e){function t(e,n){var i;return u(this,t),i=r(this,o(t).call(this,e,4,!0,!1)),void 0!==n&&(i.value=n),i}return i(t,f),t}(),p=function(e){function t(e,n){var i;return u(this,t),i=r(this,o(t).call(this,e,4,!1,!1)),void 0!==n&&(i.value=n),i}return i(t,f),t}(),d=function(e){function t(e,n,i,a,s){var c;u(this,t),c=r(this,o(t).call(this,e,n*i,a,s));var f=0;switch(i){case 1:c._heapArray=a?c._module.HEAP8:c._module.HEAPU8,f=0;break;case 2:c._heapArray=a?c._module.HEAP16:c._module.HEAPU16,f=1;break;case 4:c._heapArray=a?c._module.HEAP32:c._module.HEAPU32,f=2;break;default:throw new Error("Unit size must be an integer-size")}s&&(c._heapArray=c._module.HEAPF32,f=2);var l=c._pointer>>f;return c._buffer=c._heapArray.subarray(l,l+n),c._length=n,c}return i(t,f),c(t,[{key:"set",value:function(e,t){this._buffer.set(e,t)}},{key:"subarray",value:function(e,t){return this._buffer.subarray(e,t)}},{key:"length",get:function(){return this._length}}]),t}(),h=function(e){function t(e,n){return u(this,t),r(this,o(t).call(this,e,n,4,!0,!0))}return i(t,d),t}(),m=function(e){function t(e,n){return u(this,t),r(this,o(t).call(this,e,n,1,!1,!1))}return i(t,d),t}(),y=function(){function e(t){u(this,e),this._module=t}return c(e,[{key:"mallocInt32",value:function(e){return new l(this._module,e)}},{key:"mallocUint32",value:function(e){return new p(this._module,e)}},{key:"mallocUint8Buffer",value:function(e){return new m(this._module,e)}},{key:"mallocFloat32Buffer",value:function(e){return new h(this._module,e)}}]),e}();e.exports={writeString:function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},EmscriptenMemoryAllocator:y}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,c=[],f=!1,l=-1;function p(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var e=u(p);f=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return r.exec(e).slice(1)};function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return(r?"/":"")+(t=n(i(t.split("/"),function(e){return!!e}),!r).join("/"))||"."},t.normalize=function(e){var r=t.isAbsolute(e),o="/"===a(e,-1);return(e=n(i(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),u=a,s=0;s<a;s++)if(o[s]!==i[s]){u=s;break}var c=[];for(s=u;s<o.length;s++)c.push("..");return(c=c.concat(i.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(1))},function(e,t,n){function r(e){var t,r=n(6),o=n(7),i=n(8);e.onmessage=function(e){var n=e.data.command;switch(n){case"loadEncoder":var a,u=e.data,s=u.mimeType,c=u.wasmPath;switch(s){case"audio/wav":case"audio/wave":a=r;break;case"audio/webm":a=o;break;case"audio/ogg":a=i}var f={};c&&(f.locateFile=function(e,t){return e.match(/.wasm/)?c:t+e}),a(f).then(function(e){t=e,self.postMessage({command:"readyToInit"})});break;case"init":var l=e.data,p=l.sampleRate,d=l.channelCount,h=l.audioBitsPerSecond,m=l.videoBitsPerSecond,y=l.width,_=l.height,v=l.framerate;t.init({sampleRate:p,channelCount:d,audioBitsPerSecond:h,videoBitsPerSecond:m,width:y,height:_,framerate:v});break;case"pushInputData":for(var b=e.data,g=b.channelBuffers,w=(b.length,b.duration,0);w<g.length;w++)g[w]=new Float32Array(g[w].buffer);t.encode(g);break;case"pushVideoData":var A=e.data.videoData;t&&t.encodeVideoFrame(A);break;case"getEncodedData":case"done":"done"===n&&t.close();var S=t.flush();self.postMessage({command:"done"===n?"lastEncodedData":"encodedData",buffers:S},S),"done"===n&&self.close()}}}"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&r(self),e.exports=r},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(0).writeString,a=Int16Array.BYTES_PER_ELEMENT,u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={inputSampleRate:t,channelCount:n},this.encodedBuffers=[]}var t,n,r;return t=e,(n=[{key:"encode",value:function(e){for(var t=e[0].length,n=new ArrayBuffer(t*a*this.config.channelCount),r=new DataView(n),o=0;o<this.config.channelCount;o++)for(var i=e[o],u=0;u<t;u++){var s=32767*i[u]|0;s>32767?s=32767:s<-32768&&(s=-32768);var c=(u*this.config.channelCount+o)*a;r.setInt16(c,0|s,!0)}this.encodedBuffers.push(n)}},{key:"getHeader",value:function(){var e=this.encodedBuffers.reduce(function(e,t){return e+t.byteLength},0),t=new ArrayBuffer(44),n=new DataView(t);return i(n,0,"RIFF"),n.setUint32(4,36+e,!0),i(n,8,"WAVE"),i(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,this.config.channelCount,!0),n.setUint32(24,this.config.inputSampleRate,!0),n.setUint32(28,this.config.inputSampleRate*a*this.config.channelCount,!0),n.setUint16(32,a*this.config.channelCount,!0),n.setUint16(34,8*a,!0),i(n,36,"data"),n.setUint32(40,e,!0),t}}])&&o(t.prototype,n),r&&o(t,r),e}();e.exports=function(e){return new Promise(function(t,n){(e=void 0!==e&&e||{}).init=function(t,n,r){e.encoder=new u(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.flush=function(){var t=e.encoder.getHeader(),n=e.encoder.encodedBuffers.splice(0,e.encoder.encodedBuffers.length);return[t].concat(r(n))},e.close=function(){},t(e)})}},function(e,t,n){(function(e,r,o){var i;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s,c=(s="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){t=void 0!==(t=t||{})?t:{};var o=n(0).EmscriptenMemoryAllocator,i=48e3,c=4e3,f=20,l=4,p=4096,d=function(){function e(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n.sampleRate,a=n.channelCount,u=n.audioBitsPerSecond,s=n.videoBitsPerSecond,d=n.width,h=n.height,m=n.framerate;this.config={sampleRate:r,channelCount:a,width:d,height:h,framerate:m},this.memory=new o(t),this._opus_encoder_create=t._opus_encoder_create,this._opus_encoder_ctl=t._opus_encoder_ctl,this._opus_encode_float=t._opus_encode_float,this._opus_encoder_destroy=t._opus_encoder_destroy,this._speex_resampler_init=t._speex_resampler_init,this._speex_resampler_process_interleaved_float=t._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=t._speex_resampler_destroy,this._container=new t.Container,this._container.initVideo(1,m,d,h,s),this._container.initAudio(i,a,Math.floor(4294967295*Math.random())),this.OpusInitCodec(i,a,u),this.SpeexInitResampler(r,i,a),this.inputSamplesPerChannel=r*f/1e3,this.outputSamplePerChannel=i*f/1e3,this.videoBuffer=this.memory.mallocUint8Buffer(d*h*l),this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*a),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*a),this.mOutputBuffer=this.memory.mallocUint8Buffer(c),this.interleavedBuffers=1!==a?new Float32Array(p*a):void 0}var n,r,a;return n=e,(r=[{key:"encode",value:function(e){for(var t=this.interleave(e),n=0;n<t.length;){var r=Math.min(this.mInputBuffer.length-this.inputBufferIndex,t.length-n);if(this.mInputBuffer.set(t.subarray(n,n+r),this.inputBufferIndex),this.inputBufferIndex+=r,this.inputBufferIndex>=this.mInputBuffer.length){var o=this.memory.mallocUint32(this.inputSamplesPerChannel),i=this.memory.mallocUint32(this.outputSamplePerChannel),a=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,o.pointer,this.mResampledBuffer.pointer,i.pointer);if(o.free(),i.free(),0!==a)throw new Error("Resampling error.");var u=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(u<0)throw new Error("Opus encoding error.");this._container.writeAudioFrame(this.mOutputBuffer.pointer,u,this.outputSamplePerChannel),this.inputBufferIndex=0}n+=r}}},{key:"encodeVideoFrame",value:function(e){this.videoBuffer.set(new Uint8Array(e.slice(0)),0),this._container.writeVideoFrame(this.videoBuffer.pointer)}},{key:"close",value:function(){for(var e=this.config.channelCount,n=[],r=0;r<e;++r)n.push(new Float32Array(p-this.inputBufferIndex/e));this.encode(n),t.destroy(this._container),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this.videoBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}},{key:"interleave",value:function(e){var t=e.length;if(1===t)return e[0];for(var n=0;n<t;n++)for(var r=e[n],o=0;o<r.length;o++)this.interleavedBuffers[o*t+n]=r[o];return this.interleavedBuffers}},{key:"OpusInitCodec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,2049,r.pointer);var o=r.value;if(r.free(),0!==o)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(4002,n)}},{key:"OpusSetOpusControl",value:function(e,t){var n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}},{key:"SpeexInitResampler",value:function(e,t,n){var r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,6,r.pointer);var o=r.value;if(r.free(),0!==o)throw new Error("Initializing resampler failed.")}}])&&u(n.prototype,r),a&&u(n,a),e}();t.init=function(e){var n=e.sampleRate,r=e.channelCount,o=e.audioBitsPerSecond,i=e.videoBitsPerSecond,a=e.width,u=e.height,s=e.framerate;t.encodedBuffers=[],t.encoder=new d({sampleRate:n,channelCount:r,audioBitsPerSecond:o,videoBitsPerSecond:i,width:a,height:u,framerate:s})},t.encode=function(e){t.encoder.encode(e)},t.encodeVideoFrame=function(e){t.encoder&&t.encoder.encodeVideoFrame(e)},t.flush=function(){return t.encodedBuffers.splice(0,t.encodedBuffers.length)},t.close=function(){t.encoder.close()};var h,m={};for(h in t)t.hasOwnProperty(h)&&(m[h]=t[h]);t.arguments=[],t.thisProgram="./this.program",t.quit=function(e,t){throw t},t.preRun=[],t.postRun=[];var y,_,v=!1,b=!1;v="object"===("undefined"==typeof window?"undefined":a(window)),b="function"==typeof importScripts,y="object"===(void 0===e?"undefined":a(e))&&!v&&!b,_=!v&&!y&&!b;var g,w,A="";y?(A=r+"/",t.read=function(e,t){var r;return g||(g=n(3)),w||(w=n(4)),e=w.normalize(e),r=g.readFileSync(e),t?r:r.toString()},t.readBinary=function(e){var n=t.read(e,!0);return n.buffer||(n=new Uint8Array(n)),R(n.buffer),n},e.argv.length>1&&(t.thisProgram=e.argv[1].replace(/\\/g,"/")),t.arguments=e.argv.slice(2),e.on("uncaughtException",function(e){if(!(e instanceof Pe))throw e}),e.on("unhandledRejection",Re),t.quit=function(t){e.exit(t)},t.inspect=function(){return"[Emscripten Module object]"}):_?("undefined"!=typeof read&&(t.read=function(e){return read(e)}),t.readBinary=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(R("object"===a(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?t.arguments=scriptArgs:void 0!==arguments&&(t.arguments=arguments),"function"==typeof quit&&(t.quit=function(e){quit(e)})):(v||b)&&(b?A=self.location.href:document.currentScript&&(A=document.currentScript.src),s&&(A=s),A=0!==A.indexOf("blob:")?A.substr(0,A.lastIndexOf("/")+1):"",t.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},b&&(t.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),t.readAsync=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},t.setWindowTitle=function(e){document.title=e});var S=t.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),B=t.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||S);for(h in m)m.hasOwnProperty(h)&&(t[h]=m[h]);m=void 0;var E,C={"f64-rem":function(e,t){return e%t},debugger:function(){}},P=(new Array(0),0);"object"!==("undefined"==typeof WebAssembly?"undefined":a(WebAssembly))&&B("no native wasm support detected");var j=!1;function R(e,t){e||Re("Assertion failed: "+t)}var x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&x)return x.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var u=63&e[t++];if(192!=(224&a)){var s=63&e[t++];if((a=224==(240&a)?(15&a)<<12|u<<6|s:(7&a)<<18|u<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|u)}else i+=String.fromCharCode(a)}return i}function T(e,t){return e?O(F,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var I,F,k,M=16384,U=t.TOTAL_MEMORY||16777216;function V(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?t.dynCall_v(r):t.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}U<5242880&&B("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+U+"! (TOTAL_STACK=5242880)"),t.buffer?I=t.buffer:("object"===("undefined"==typeof WebAssembly?"undefined":a(WebAssembly))&&"function"==typeof WebAssembly.Memory?(E=new WebAssembly.Memory({initial:U/65536,maximum:U/65536}),I=E.buffer):I=new ArrayBuffer(U),t.buffer=I),t.HEAP8=new Int8Array(I),t.HEAP16=new Int16Array(I),t.HEAP32=k=new Int32Array(I),t.HEAPU8=F=new Uint8Array(I),t.HEAPU16=new Uint16Array(I),t.HEAPU32=new Uint32Array(I),t.HEAPF32=new Float32Array(I),t.HEAPF64=new Float64Array(I),k[22996]=5335120;var L=[],D=[],H=[],W=[],z=!1,q=Math.cos,K=Math.sin,N=0,G=null,X=null;t.preloadedImages={},t.preloadedAudios={};var Y="data:application/octet-stream;base64,";function J(e){return String.prototype.startsWith?e.startsWith(Y):0===e.indexOf(Y)}var Z,$="WebMOpusEncoder.wasm";function Q(){try{if(t.wasmBinary)return new Uint8Array(t.wasmBinary);if(t.readBinary)return t.readBinary($);throw"both async and sync fetching of the wasm failed"}catch(e){Re(e)}}function ee(e){var n={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:C};function r(e,n){var r=e.exports;t.asm=r,function(e){if(N--,t.monitorRunDependencies&&t.monitorRunDependencies(N),0==N&&(null!==G&&(clearInterval(G),G=null),X)){var n=X;X=null,n()}}()}if(N++,t.monitorRunDependencies&&t.monitorRunDependencies(N),t.instantiateWasm)try{return t.instantiateWasm(n,r)}catch(e){return B("Module.instantiateWasm callback failed with error: "+e),!1}function o(e){r(e.instance)}function i(e){(t.wasmBinary||!v&&!b||"function"!=typeof fetch?new Promise(function(e,t){e(Q())}):fetch($,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+$+"'";return e.arrayBuffer()}).catch(function(){return Q()})).then(function(e){return WebAssembly.instantiate(e,n)}).then(e,function(e){B("failed to asynchronously prepare wasm: "+e),Re(e)})}return t.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||J($)||"function"!=typeof fetch?i(o):WebAssembly.instantiateStreaming(fetch($,{credentials:"same-origin"}),n).then(o,function(e){B("wasm streaming compile failed: "+e),B("falling back to ArrayBuffer instantiation"),i(o)}),{}}J($)||(Z=$,$=t.locateFile?t.locateFile(Z,A):A+Z),t.asm=function(e,t,n){return t.memory=E,t.table=new WebAssembly.Table({initial:338,maximum:338,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0,ee(t)};var te={buffers:[null,[],[]],printChar:function(e,t){var n=te.buffers[e];0===t||10===t?((1===e?S:B)(O(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){return te.varargs+=4,k[te.varargs-4>>2]},getStr:function(){return T(te.get())},get64:function(){var e=te.get();return te.get(),e},getZero:function(){te.get()}};function ne(e){return t.___errno_location&&(k[t.___errno_location()>>2]=e),e}function re(e){Re("OOM")}function oe(){var e=oe;return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(ye()),e.LLVM_SAVEDSTACKS.length-1}var ie={e:Re,c:function(e){P=e},b:function(){return P},G:function(e,t){var n=ye();try{return _e(e,t)}catch(e){if(me(n),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},F:function(e,t){var n=ye();try{return ve(e,t)}catch(e){if(me(n),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},m:function(e,t,n){var r=ye();try{return be(e,t,n)}catch(e){if(me(r),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},E:function(e,t,n,r,o){var i=ye();try{return ge(e,t,n,r,o)}catch(e){if(me(i),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},X:function(e,t,n,r,o,i,a,u,s){var c=ye();try{return we(e,t,n,r,o,i,a,u,s)}catch(e){if(me(c),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},I:function(e,t,n,r,o,i,a,u){var s=ye();try{return Ae(e,t,n,r,o,i,a,u)}catch(e){if(me(s),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},i:function(e,t){var n=ye();try{Se(e,t)}catch(e){if(me(n),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},s:function(e,t,n){var r=ye();try{Be(e,t,n)}catch(e){if(me(r),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},o:function(e,t,n,r,o){var i=ye();try{Ee(e,t,n,r,o)}catch(e){if(me(i),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},H:function(e,t,n,r,o,i,a,u,s,c){var f=ye();try{Ce(e,t,n,r,o,i,a,u,s,c)}catch(e){if(me(f),e!==e+0&&"longjmp"!==e)throw e;he(1,0)}},f:function(e,t,n,r){Re("Assertion failed: "+T(e)+", at: "+[t?T(t):"unknown filename",n,r?T(r):"unknown function"])},W:function(){throw j=!0,"Pure virtual function called!"},v:function(){},D:ne,V:function(e,t){te.varargs=t;try{var n=te.getStreamFromFD(),r=(te.get(),te.get()),o=te.get(),i=te.get(),a=r;return FS.llseek(n,a,i),k[o>>2]=n.position,n.getdents&&0===a&&0===i&&(n.getdents=null),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Re(e),-e.errno}},U:function(e,t){te.varargs=t;try{var n=te.getStreamFromFD(),r=te.get(),o=te.get();return te.doReadv(n,r,o)}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Re(e),-e.errno}},C:function(e,t){te.varargs=t;try{for(var n=te.get(),r=te.get(),o=te.get(),i=0,a=0;a<o;a++){for(var u=k[r+8*a>>2],s=k[r+(8*a+4)>>2],c=0;c<s;c++)te.printChar(n,F[u+c]);i+=s}return i}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Re(e),-e.errno}},B:function(e,t){te.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Re(e),-e.errno}},T:function(e,t){te.varargs=t;try{var n=te.getStr(),r=te.get(),o=te.get();return FS.open(n,r,o).fd}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Re(e),-e.errno}},A:function(e,t){te.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Re(e),-e.errno}},z:function(e,t){te.varargs=t;try{var n=te.getStreamFromFD();return FS.close(n),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Re(e),-e.errno}},u:function(){},S:function(){t.abort()},R:function(e,n){var r=new Uint8Array(t.HEAPU8.buffer,e,n);t.encodedBuffers.push(new Uint8Array(r).buffer)},Q:function(){return U},P:function(e,t,n){F.set(F.subarray(t,t+n),e)},O:function(e){re()},g:function(e){var t=Date.now();return k[e>>2]=t/1e3|0,k[e+4>>2]=t%1e3*1e3|0,0},y:q,t:function(e){return t=e,Math.pow(2,t);var t},r:function(e){return t=e,Math.log(t)/Math.LN10;var t},N:K,h:function(e){var t=oe,n=t.LLVM_SAVEDSTACKS[e];t.LLVM_SAVEDSTACKS.splice(e,1),me(n)},l:oe,M:function(){Re("trap!")},d:function(e,t){throw he(e,t||1),"longjmp"},x:function(){return 11},q:function(){},w:function(){return 0},k:function(){},p:function(){},j:function(){},n:function(){},L:function(e){switch(e){case 30:return M;case 85:return F.length/M;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"===("undefined"==typeof navigator?"undefined":a(navigator))&&navigator.hardwareConcurrency||1}return ne(22),-1},K:function(e){var t=Date.now()/1e3|0;return e&&(k[e>>2]=t),t},J:re,a:91984},ae=t.asm({},ie,I);t.asm=ae,t.___em_js__emscriptenPushBuffer=function(){return t.asm.Y.apply(null,arguments)};var ue=t._emscripten_bind_Container_Container_0=function(){return t.asm.Z.apply(null,arguments)},se=t._emscripten_bind_Container___destroy___0=function(){return t.asm._.apply(null,arguments)},ce=t._emscripten_bind_Container_initAudio_3=function(){return t.asm.$.apply(null,arguments)},fe=t._emscripten_bind_Container_initVideo_5=function(){return t.asm.aa.apply(null,arguments)},le=t._emscripten_bind_Container_writeAudioFrame_3=function(){return t.asm.ba.apply(null,arguments)},pe=t._emscripten_bind_Container_writeVideoFrame_1=function(){return t.asm.ca.apply(null,arguments)},de=t._emscripten_bind_VoidPtr___destroy___0=function(){return t.asm.da.apply(null,arguments)},he=(t._free=function(){return t.asm.ea.apply(null,arguments)},t._malloc=function(){return t.asm.fa.apply(null,arguments)},t._opus_encode_float=function(){return t.asm.ga.apply(null,arguments)},t._opus_encoder_create=function(){return t.asm.ha.apply(null,arguments)},t._opus_encoder_ctl=function(){return t.asm.ia.apply(null,arguments)},t._opus_encoder_destroy=function(){return t.asm.ja.apply(null,arguments)},t._setThrew=function(){return t.asm.ka.apply(null,arguments)}),me=(t._speex_resampler_destroy=function(){return t.asm.la.apply(null,arguments)},t._speex_resampler_init=function(){return t.asm.ma.apply(null,arguments)},t._speex_resampler_process_interleaved_float=function(){return t.asm.na.apply(null,arguments)},t.stackRestore=function(){return t.asm.za.apply(null,arguments)}),ye=t.stackSave=function(){return t.asm.Aa.apply(null,arguments)},_e=t.dynCall_dd=function(){return t.asm.oa.apply(null,arguments)},ve=t.dynCall_ii=function(){return t.asm.pa.apply(null,arguments)},be=t.dynCall_iii=function(){return t.asm.qa.apply(null,arguments)},ge=t.dynCall_iiiii=function(){return t.asm.ra.apply(null,arguments)},we=t.dynCall_iiiiiiiii=function(){return t.asm.sa.apply(null,arguments)},Ae=t.dynCall_iiiijj=function(){return t.asm.ta.apply(null,arguments)},Se=(t.dynCall_v=function(){return t.asm.ua.apply(null,arguments)},t.dynCall_vi=function(){return t.asm.va.apply(null,arguments)}),Be=t.dynCall_vii=function(){return t.asm.wa.apply(null,arguments)},Ee=t.dynCall_viiii=function(){return t.asm.xa.apply(null,arguments)},Ce=t.dynCall_vijjjid=function(){return t.asm.ya.apply(null,arguments)};function Pe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function je(e){function n(){t.calledRun||(t.calledRun=!0,j||(z||(z=!0,V(D)),V(H),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),W.unshift(e);var e;V(W)}()))}e=e||t.arguments,N>0||(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),L.unshift(e);var e;V(L)}(),N>0||t.calledRun||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()))}function Re(e){throw t.onAbort&&t.onAbort(e),void 0!==e?(S(e),B(e),e=JSON.stringify(e)):e="",j=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.asm=ae,t.then=function(e){if(t.calledRun)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},Pe.prototype=new Error,Pe.prototype.constructor=Pe,X=function e(){t.calledRun||je(),t.calledRun||(X=e)},t.run=je,t.abort=Re,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();function xe(){}function Oe(e){return(e||xe).__cache__}function Te(e,t){var n=Oe(t),r=n[e];return r||((r=Object.create((t||xe).prototype)).ptr=e,n[e]=r)}function Ie(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Fe(){this.ptr=ue(),Oe(Fe)[this.ptr]=this}return t.noExitRuntime=!0,je(),xe.prototype=Object.create(xe.prototype),xe.prototype.constructor=xe,xe.prototype.__class__=xe,xe.__cache__={},t.WrapperObject=xe,t.getCache=Oe,t.wrapPointer=Te,t.castObject=function(e,t){return Te(e.ptr,t)},t.NULL=Te(0),t.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Oe(e.__class__)[e.ptr]},t.compare=function(e,t){return e.ptr===t.ptr},t.getPointer=function(e){return e.ptr},t.getClass=function(e){return e.__class__},Ie.prototype=Object.create(xe.prototype),Ie.prototype.constructor=Ie,Ie.prototype.__class__=Ie,Ie.__cache__={},t.VoidPtr=Ie,Ie.prototype.__destroy__=Ie.prototype.__destroy__=function(){var e=this.ptr;de(e)},Fe.prototype=Object.create(xe.prototype),Fe.prototype.constructor=Fe,Fe.prototype.__class__=Fe,Fe.__cache__={},t.Container=Fe,Fe.prototype.initAudio=Fe.prototype.initAudio=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),ce(r,e,t,n)},Fe.prototype.initVideo=Fe.prototype.initVideo=function(e,t,n,r,o){var i=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),r&&"object"===a(r)&&(r=r.ptr),o&&"object"===a(o)&&(o=o.ptr),fe(i,e,t,n,r,o)},Fe.prototype.writeAudioFrame=Fe.prototype.writeAudioFrame=function(e,t,n){var r=this.ptr;return e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),!!le(r,e,t,n)},Fe.prototype.writeVideoFrame=Fe.prototype.writeVideoFrame=function(e){var t=this.ptr;return e&&"object"===a(e)&&(e=e.ptr),!!pe(t,e)},Fe.prototype.__destroy__=Fe.prototype.__destroy__=function(){var e=this.ptr;se(e)},function(){function e(){}var t;z||(t=e,H.unshift(t))}(),t});"object"===a(t)&&"object"===a(o)?o.exports=c:void 0===(i=function(){return c}.apply(t,[]))||(o.exports=i)}).call(this,n(1),"/",n(2)(e))},function(e,t,n){(function(e,r,o){var i;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s,c=(s="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){t=void 0!==(t=t||{})?t:{};var o=n(0).EmscriptenMemoryAllocator,i=48e3,c=4e3,f=20,l=4,p=4096,d=function(){function e(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n.sampleRate,a=n.channelCount,u=n.audioBitsPerSecond,s=n.videoBitsPerSecond,d=n.width,h=n.height,m=n.framerate;this.config={sampleRate:r,channelCount:a,width:d,height:h,framerate:m},this.memory=new o(t),this._opus_encoder_create=t._opus_encoder_create,this._opus_encoder_ctl=t._opus_encoder_ctl,this._opus_encode_float=t._opus_encode_float,this._opus_encoder_destroy=t._opus_encoder_destroy,this._speex_resampler_init=t._speex_resampler_init,this._speex_resampler_process_interleaved_float=t._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=t._speex_resampler_destroy,this._container=new t.Container,this._container.initVideo(1,m,d,h,s),this._container.initAudio(i,a,Math.floor(4294967295*Math.random())),this.OpusInitCodec(i,a,u),this.SpeexInitResampler(r,i,a),this.inputSamplesPerChannel=r*f/1e3,this.outputSamplePerChannel=i*f/1e3,this.videoBuffer=this.memory.mallocUint8Buffer(d*h*l),this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*a),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*a),this.mOutputBuffer=this.memory.mallocUint8Buffer(c),this.interleavedBuffers=1!==a?new Float32Array(p*a):void 0}var n,r,a;return n=e,(r=[{key:"encode",value:function(e){for(var t=this.interleave(e),n=0;n<t.length;){var r=Math.min(this.mInputBuffer.length-this.inputBufferIndex,t.length-n);if(this.mInputBuffer.set(t.subarray(n,n+r),this.inputBufferIndex),this.inputBufferIndex+=r,this.inputBufferIndex>=this.mInputBuffer.length){var o=this.memory.mallocUint32(this.inputSamplesPerChannel),i=this.memory.mallocUint32(this.outputSamplePerChannel),a=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,o.pointer,this.mResampledBuffer.pointer,i.pointer);if(o.free(),i.free(),0!==a)throw new Error("Resampling error.");var u=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(u<0)throw new Error("Opus encoding error.");this._container.writeAudioFrame(this.mOutputBuffer.pointer,u,this.outputSamplePerChannel),this.inputBufferIndex=0}n+=r}}},{key:"encodeVideoFrame",value:function(e){this.videoBuffer.set(new Uint8Array(e.slice(0)),0),this._container.writeVideoFrame(this.videoBuffer.pointer)}},{key:"close",value:function(){for(var e=this.config.channelCount,n=[],r=0;r<e;++r)n.push(new Float32Array(p-this.inputBufferIndex/e));this.encode(n),t.destroy(this._container),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this.videoBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}},{key:"interleave",value:function(e){var t=e.length;if(1===t)return e[0];for(var n=0;n<t;n++)for(var r=e[n],o=0;o<r.length;o++)this.interleavedBuffers[o*t+n]=r[o];return this.interleavedBuffers}},{key:"OpusInitCodec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,2049,r.pointer);var o=r.value;if(r.free(),0!==o)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(4002,n)}},{key:"OpusSetOpusControl",value:function(e,t){var n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}},{key:"SpeexInitResampler",value:function(e,t,n){var r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,6,r.pointer);var o=r.value;if(r.free(),0!==o)throw new Error("Initializing resampler failed.")}}])&&u(n.prototype,r),a&&u(n,a),e}();t.init=function(e){var n=e.sampleRate,r=e.channelCount,o=e.audioBitsPerSecond,i=e.videoBitsPerSecond,a=e.width,u=e.height,s=e.framerate;t.encodedBuffers=[],t.encoder=new d({sampleRate:n,channelCount:r,audioBitsPerSecond:o,videoBitsPerSecond:i,width:a,height:u,framerate:s})},t.encode=function(e){t.encoder.encode(e)},t.encodeVideoFrame=function(e){t.encoder&&t.encoder.encodeVideoFrame(e)},t.flush=function(){return t.encodedBuffers.splice(0,t.encodedBuffers.length)},t.close=function(){t.encoder.close()};var h,m={};for(h in t)t.hasOwnProperty(h)&&(m[h]=t[h]);t.arguments=[],t.thisProgram="./this.program",t.quit=function(e,t){throw t},t.preRun=[],t.postRun=[];var y,_,v=!1,b=!1;v="object"===("undefined"==typeof window?"undefined":a(window)),b="function"==typeof importScripts,y="object"===(void 0===e?"undefined":a(e))&&!v&&!b,_=!v&&!y&&!b;var g,w,A="";y?(A=r+"/",t.read=function(e,t){var r;return g||(g=n(3)),w||(w=n(4)),e=w.normalize(e),r=g.readFileSync(e),t?r:r.toString()},t.readBinary=function(e){var n=t.read(e,!0);return n.buffer||(n=new Uint8Array(n)),j(n.buffer),n},e.argv.length>1&&(t.thisProgram=e.argv[1].replace(/\\/g,"/")),t.arguments=e.argv.slice(2),e.on("uncaughtException",function(e){if(!(e instanceof le))throw e}),e.on("unhandledRejection",de),t.quit=function(t){e.exit(t)},t.inspect=function(){return"[Emscripten Module object]"}):_?("undefined"!=typeof read&&(t.read=function(e){return read(e)}),t.readBinary=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(j("object"===a(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?t.arguments=scriptArgs:void 0!==arguments&&(t.arguments=arguments),"function"==typeof quit&&(t.quit=function(e){quit(e)})):(v||b)&&(b?A=self.location.href:document.currentScript&&(A=document.currentScript.src),s&&(A=s),A=0!==A.indexOf("blob:")?A.substr(0,A.lastIndexOf("/")+1):"",t.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},b&&(t.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),t.readAsync=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},t.setWindowTitle=function(e){document.title=e});var S=t.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),B=t.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||S);for(h in m)m.hasOwnProperty(h)&&(t[h]=m[h]);m=void 0;var E,C={"f64-rem":function(e,t){return e%t},debugger:function(){}};new Array(0),"object"!==("undefined"==typeof WebAssembly?"undefined":a(WebAssembly))&&B("no native wasm support detected");var P=!1;function j(e,t){e||de("Assertion failed: "+t)}var R,x,O,T="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function I(e,t){return e?function(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&T)return T.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var u=63&e[t++];if(192!=(224&a)){var s=63&e[t++];if((a=224==(240&a)?(15&a)<<12|u<<6|s:(7&a)<<18|u<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|u)}else i+=String.fromCharCode(a)}return i}(x,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var F=t.TOTAL_MEMORY||16777216;function k(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?t.dynCall_v(r):t.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}F<5242880&&B("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+F+"! (TOTAL_STACK=5242880)"),t.buffer?R=t.buffer:("object"===("undefined"==typeof WebAssembly?"undefined":a(WebAssembly))&&"function"==typeof WebAssembly.Memory?(E=new WebAssembly.Memory({initial:F/65536,maximum:F/65536}),R=E.buffer):R=new ArrayBuffer(F),t.buffer=R),t.HEAP8=new Int8Array(R),t.HEAP16=new Int16Array(R),t.HEAP32=O=new Int32Array(R),t.HEAPU8=x=new Uint8Array(R),t.HEAPU16=new Uint16Array(R),t.HEAPU32=new Uint32Array(R),t.HEAPF32=new Float32Array(R),t.HEAPF64=new Float64Array(R),O[9700]=5281936;var M=[],U=[],V=[],L=[],D=!1,H=Math.cos,W=Math.sin,z=0,q=null,K=null;t.preloadedImages={},t.preloadedAudios={};var N="data:application/octet-stream;base64,";function G(e){return String.prototype.startsWith?e.startsWith(N):0===e.indexOf(N)}var X,Y="OggOpusEncoder.wasm";function J(){try{if(t.wasmBinary)return new Uint8Array(t.wasmBinary);if(t.readBinary)return t.readBinary(Y);throw"both async and sync fetching of the wasm failed"}catch(e){de(e)}}function Z(e){var n={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:C};function r(e,n){var r=e.exports;t.asm=r,function(e){if(z--,t.monitorRunDependencies&&t.monitorRunDependencies(z),0==z&&(null!==q&&(clearInterval(q),q=null),K)){var n=K;K=null,n()}}()}if(z++,t.monitorRunDependencies&&t.monitorRunDependencies(z),t.instantiateWasm)try{return t.instantiateWasm(n,r)}catch(e){return B("Module.instantiateWasm callback failed with error: "+e),!1}function o(e){r(e.instance)}function i(e){(t.wasmBinary||!v&&!b||"function"!=typeof fetch?new Promise(function(e,t){e(J())}):fetch(Y,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Y+"'";return e.arrayBuffer()}).catch(function(){return J()})).then(function(e){return WebAssembly.instantiate(e,n)}).then(e,function(e){B("failed to asynchronously prepare wasm: "+e),de(e)})}return t.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||G(Y)||"function"!=typeof fetch?i(o):WebAssembly.instantiateStreaming(fetch(Y,{credentials:"same-origin"}),n).then(o,function(e){B("wasm streaming compile failed: "+e),B("falling back to ArrayBuffer instantiation"),i(o)}),{}}function $(e){de("OOM")}function Q(){var e=Q;return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(fe()),e.LLVM_SAVEDSTACKS.length-1}G(Y)||(X=Y,Y=t.locateFile?t.locateFile(X,A):A+X),t.asm=function(e,t,n){return t.memory=E,t.table=new WebAssembly.Table({initial:46,maximum:46,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0,Z(t)};var ee={d:de,b:function(e,t,n,r){de("Assertion failed: "+I(e)+", at: "+[t?I(t):"unknown filename",n,r?I(r):"unknown function"])},m:function(){throw P=!0,"Pure virtual function called!"},j:function(e){return t.___errno_location&&(O[t.___errno_location()>>2]=e),e},i:function(){t.abort()},h:function(e,n){var r=new Uint8Array(t.HEAPU8.buffer,e,n);t.encodedBuffers.push(new Uint8Array(r).buffer)},l:function(){return F},q:function(e,t,n){x.set(x.subarray(t,t+n),e)},p:function(e){$()},k:H,g:function(e){return t=e,Math.pow(2,t);var t},f:function(e){return t=e,Math.log(t)/Math.LN10;var t},o:W,c:function(e){var t=Q,n=t.LLVM_SAVEDSTACKS[e];t.LLVM_SAVEDSTACKS.splice(e,1),ce(n)},e:Q,n:$,a:38800},te=t.asm({},ee,R);t.asm=te,t.___em_js__emscriptenPushBuffer=function(){return t.asm.r.apply(null,arguments)};var ne=t._emscripten_bind_Container_Container_0=function(){return t.asm.s.apply(null,arguments)},re=t._emscripten_bind_Container___destroy___0=function(){return t.asm.t.apply(null,arguments)},oe=t._emscripten_bind_Container_initAudio_3=function(){return t.asm.u.apply(null,arguments)},ie=t._emscripten_bind_Container_initVideo_5=function(){return t.asm.v.apply(null,arguments)},ae=t._emscripten_bind_Container_writeAudioFrame_3=function(){return t.asm.w.apply(null,arguments)},ue=t._emscripten_bind_Container_writeVideoFrame_1=function(){return t.asm.x.apply(null,arguments)},se=t._emscripten_bind_VoidPtr___destroy___0=function(){return t.asm.y.apply(null,arguments)},ce=(t._free=function(){return t.asm.z.apply(null,arguments)},t._malloc=function(){return t.asm.A.apply(null,arguments)},t._opus_encode_float=function(){return t.asm.B.apply(null,arguments)},t._opus_encoder_create=function(){return t.asm.C.apply(null,arguments)},t._opus_encoder_ctl=function(){return t.asm.D.apply(null,arguments)},t._opus_encoder_destroy=function(){return t.asm.E.apply(null,arguments)},t._speex_resampler_destroy=function(){return t.asm.F.apply(null,arguments)},t._speex_resampler_init=function(){return t.asm.G.apply(null,arguments)},t._speex_resampler_process_interleaved_float=function(){return t.asm.H.apply(null,arguments)},t.stackRestore=function(){return t.asm.K.apply(null,arguments)}),fe=t.stackSave=function(){return t.asm.L.apply(null,arguments)};function le(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function pe(e){function n(){t.calledRun||(t.calledRun=!0,P||(D||(D=!0,k(U)),k(V),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),L.unshift(e);var e;k(L)}()))}e=e||t.arguments,z>0||(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),M.unshift(e);var e;k(M)}(),z>0||t.calledRun||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()))}function de(e){throw t.onAbort&&t.onAbort(e),void 0!==e?(S(e),B(e),e=JSON.stringify(e)):e="",P=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(t.dynCall_v=function(){return t.asm.I.apply(null,arguments)},t.dynCall_vi=function(){return t.asm.J.apply(null,arguments)},t.asm=te,t.then=function(e){if(t.calledRun)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},le.prototype=new Error,le.prototype.constructor=le,K=function e(){t.calledRun||pe(),t.calledRun||(K=e)},t.run=pe,t.abort=de,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();function he(){}function me(e){return(e||he).__cache__}function ye(e,t){var n=me(t),r=n[e];return r||((r=Object.create((t||he).prototype)).ptr=e,n[e]=r)}function _e(){throw"cannot construct a VoidPtr, no constructor in IDL"}function ve(){this.ptr=ne(),me(ve)[this.ptr]=this}return t.noExitRuntime=!0,pe(),he.prototype=Object.create(he.prototype),he.prototype.constructor=he,he.prototype.__class__=he,he.__cache__={},t.WrapperObject=he,t.getCache=me,t.wrapPointer=ye,t.castObject=function(e,t){return ye(e.ptr,t)},t.NULL=ye(0),t.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete me(e.__class__)[e.ptr]},t.compare=function(e,t){return e.ptr===t.ptr},t.getPointer=function(e){return e.ptr},t.getClass=function(e){return e.__class__},_e.prototype=Object.create(he.prototype),_e.prototype.constructor=_e,_e.prototype.__class__=_e,_e.__cache__={},t.VoidPtr=_e,_e.prototype.__destroy__=_e.prototype.__destroy__=function(){var e=this.ptr;se(e)},ve.prototype=Object.create(he.prototype),ve.prototype.constructor=ve,ve.prototype.__class__=ve,ve.__cache__={},t.Container=ve,ve.prototype.initAudio=ve.prototype.initAudio=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),oe(r,e,t,n)},ve.prototype.initVideo=ve.prototype.initVideo=function(e,t,n,r,o){var i=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),r&&"object"===a(r)&&(r=r.ptr),o&&"object"===a(o)&&(o=o.ptr),ie(i,e,t,n,r,o)},ve.prototype.writeAudioFrame=ve.prototype.writeAudioFrame=function(e,t,n){var r=this.ptr;return e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),!!ae(r,e,t,n)},ve.prototype.writeVideoFrame=ve.prototype.writeVideoFrame=function(e){var t=this.ptr;return e&&"object"===a(e)&&(e=e.ptr),!!ue(t,e)},ve.prototype.__destroy__=ve.prototype.__destroy__=function(){var e=this.ptr;re(e)},function(){function e(){}var t;D||(t=e,V.unshift(t))}(),t});"object"===a(t)&&"object"===a(o)?o.exports=c:void 0===(i=function(){return c}.apply(t,[]))||(o.exports=i)}).call(this,n(1),"/",n(2)(e))}])});